<!DOCTYPE HTML><html lang=en class="sidebar-visible no-js light"><head><meta charset=UTF-8><title>One-liner introduction - Perl one-liners cookbook</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta name=description content="Example based guide for text processing with Perl from the command line"><meta name=viewport content="width=device-width, initial-scale=1"><meta name=theme-color content=#ffffff><link rel=icon href=favicon.svg><link rel="shortcut icon"href=favicon.png><link rel=stylesheet href=css/variables.css><link rel=stylesheet href=css/general.css><link rel=stylesheet href=css/chrome.css><link rel=stylesheet href=FontAwesome/css/font-awesome.css><link rel=stylesheet href=fonts/fonts.css><link rel=stylesheet href=highlight.css><link rel=stylesheet href=tomorrow-night.css><link rel=stylesheet href=ayu-highlight.css><link rel=stylesheet href=style.css><body><script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script><script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script><script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script><script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script><nav id=sidebar class=sidebar aria-label="Table of contents"><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=cover.html>Cover</a><li class="chapter-item expanded affix"><a href=buy.html>Buy PDF/EPUB versions</a><li class="chapter-item expanded"><a href=preface.html><strong aria-hidden=true>1.</strong> Preface</a><li class="chapter-item expanded"><a href=one-liner-introduction.html class=active><strong aria-hidden=true>2.</strong> One-liner introduction</a><li class="chapter-item expanded"><a href=line-processing.html><strong aria-hidden=true>3.</strong> Line processing</a><li class="chapter-item expanded"><a href=in-place-file-editing.html><strong aria-hidden=true>4.</strong> In-place file editing</a><li class="chapter-item expanded"><a href=field-separators.html><strong aria-hidden=true>5.</strong> Field separators</a><li class="chapter-item expanded"><a href=record-separators.html><strong aria-hidden=true>6.</strong> Record separators</a><li class="chapter-item expanded"><a href=using-modules.html><strong aria-hidden=true>7.</strong> Using modules</a><li class="chapter-item expanded"><a href=multiple-file-input.html><strong aria-hidden=true>8.</strong> Multiple file input</a><li class="chapter-item expanded"><a href=processing-multiple-records.html><strong aria-hidden=true>9.</strong> Processing multiple records</a><li class="chapter-item expanded"><a href=two-file-processing.html><strong aria-hidden=true>10.</strong> Two file processing</a><li class="chapter-item expanded"><a href=dealing-with-duplicates.html><strong aria-hidden=true>11.</strong> Dealing with duplicates</a><li class="chapter-item expanded"><a href=perl-rename-command.html><strong aria-hidden=true>12.</strong> Perl rename command</a><li class="chapter-item expanded"><a href=Exercise_solutions.html><strong aria-hidden=true>13.</strong> Exercise Solutions</a></li><br><hr><li class="chapter-item expanded"><i id=git-repository-button class="fa fa-github"></i><a href=https://github.com/learnbyexample/learn_perl_oneliners>   Source code</a><li class="chapter-item expanded"><i id=home-button class="fa fa-home"></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i id=book-button class="fa fa-book"></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i id=mail-button class="fa fa-envelope"></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a></ol></div><div id=sidebar-resize-handle class=sidebar-resize-handle></div></nav><div id=page-wrapper class=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div id=menu-bar class="menu-bar sticky bordered"><div class=left-buttons><button id=sidebar-toggle class=icon-button type=button title="Toggle Table of Contents"aria-label="Toggle Table of Contents"aria-controls=sidebar><i class="fa fa-bars"></i></button><button id=theme-toggle class=icon-button type=button title="Change theme"aria-label="Change theme"aria-haspopup=true aria-expanded=false aria-controls=theme-list><i class="fa fa-paint-brush"></i></button><ul id=theme-list class=theme-popup aria-label=Themes role=menu><li role=none><button role=menuitem class=theme id=light>Light (default)</button><li role=none><button role=menuitem class=theme id=rust>Rust</button><li role=none><button role=menuitem class=theme id=coal>Coal</button><li role=none><button role=menuitem class=theme id=navy>Navy</button><li role=none><button role=menuitem class=theme id=ayu>Ayu</button></ul><button id=search-toggle class=icon-button type=button title="Search. (Shortkey: s)"aria-label="Toggle Searchbar"aria-expanded=false aria-keyshortcuts=S aria-controls=searchbar><i class="fa fa-search"></i></button></div><h1 class=menu-title>Perl one-liners cookbook</h1><div class=right-buttons><a href=https://learnbyexample.github.io title=Blog aria-label=Blog> <i id=home-button class="fa fa-home"></i> </a><a href=https://github.com/learnbyexample/learn_perl_oneliners title="Git repository"aria-label="Git repository"> <i id=git-repository-button class="fa fa-github"></i> </a></div></div><div id=search-wrapper class=hidden><form id=searchbar-outer class=searchbar-outer><input type=search id=searchbar name=searchbar placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header></form><div id=searchresults-outer class="searchresults-outer hidden"><div id=searchresults-header class=searchresults-header></div><ul id=searchresults></ul></div></div><script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script><div id=content class=content><main><div class=sidetoc><nav class=pagetoc></nav></div><h1 id=one-liner-introduction><a class=header href=#one-liner-introduction>One-liner introduction</a></h1><p>This chapter will give an overview of <code>perl</code> syntax for command line usage and some examples to show what kind of problems are typically suited for one-liners.<h2 id=why-use-perl-for-one-liners><a class=header href=#why-use-perl-for-one-liners>Why use Perl for one-liners?</a></h2><p>I assume you are already familiar with use cases where command line is more productive compared to GUI. See also this series of articles titled <a href=https://sanctum.geek.nz/arabesque/series/unix-as-ide/>Unix as IDE</a>.<p>A shell utility like <code>bash</code> provides built-in commands and scripting features to easily solve and automate various tasks. External *nix commands like <code>grep</code>, <code>sed</code>, <code>awk</code>, <code>sort</code>, <code>find</code>, <code>parallel</code>, etc can be combined to work with each other. Depending upon your familiarity with those tools, you can either use <code>perl</code> as a single replacement or complement them for specific use cases.<p>Here's some one-liners (options will be explained later):<ul><li><code>perl -pe 's/(?:\x27;\x27|";")(*SKIP)(*F)|;/#/g'</code> — change <code>;</code> to <code>#</code> but don't change <code>;</code> within single or double quotes<li><code>perl -MList::Util=uniq -e 'print uniq <>'</code> — retain only first copy of duplicated lines, uses built-in module <code>List::Util</code><li><code>perl -MRegexp::Common=net -nE 'say $& while /$RE{net}{IPv4}/g'</code> — extract only IPv4 addresses, using a third-party <a href=https://metacpan.org/pod/Regexp::Common>Regexp::Common</a> module<li>Some stackoverflow Q&A that I've answered over the years with simpler <code>perl</code> solution compared to other cli tools <ul><li><a href=https://stackoverflow.com/q/42554684/4082052>replace string with incrementing value</a><li><a href=https://stackoverflow.com/q/48920626/4082052>sort rows in csv file without header & first column</a><li><a href=https://stackoverflow.com/q/63681983/4082052>reverse matched pattern</a><li><a href=https://stackoverflow.com/q/49765879/4082052>append zeros to list</a><li><a href=https://stackoverflow.com/q/62241101/4082052>arithmetic replacement in a text file</a><li><a href=https://stackoverflow.com/q/45571828/4082052>reverse complement DNA sequence for a specific field</a></ul></ul><p>The selling point of <code>perl</code> over tools like <code>grep</code>, <code>sed</code> and <code>awk</code> includes feature rich regular expression engine and standard/third-party modules. If you don't already know the syntax and idioms for <code>sed</code> and <code>awk</code>, learning command line options for <code>perl</code> would be the easier option. Another advantage is that <code>perl</code> is more portable, given the many differences between GNU, BSD, Mac and other such implementations. The main disadvantage is that <code>perl</code> is likely to be verbose and slower for features that are supported out of the box by those tools.<blockquote><p><img src=images/info.svg alt=info> See also <a href=https://unix.stackexchange.com/q/303044/109046>unix.stackexchange: when to use grep, sed, awk, perl, etc</a></blockquote><h2 id=installation-and-documentation><a class=header href=#installation-and-documentation>Installation and Documentation</a></h2><p>If you are on a Unix like system, you are most likely to already have some version of Perl installed. See <a href=https://www.cpan.org/src/README.html>cpan: Perl Source</a> for instructions to install the latest <code>perl</code> version from source. <code>perl v5.32.0</code> is used for all the examples shown in this book.<p>You can use <code>perldoc</code> command to access documentation from the command line. You can visit <a href=https://perldoc.perl.org/>https://perldoc.perl.org/</a> if you wish to read it online, which also has a handy search feature. Here's some useful links to get started:<ul><li><a href=https://perldoc.perl.org/perl#Overview>perldoc: overview</a><li><a href=https://perldoc.perl.org/perlintro>perldoc: perlintro</a><li><a href=https://perldoc.perl.org/perlfaq>perldoc: faqs</a></ul><h2 id=command-line-options><a class=header href=#command-line-options>Command line options</a></h2><p><code>perl -h</code> gives the list of all command line options, along with a brief description. See <a href=https://perldoc.perl.org/perlrun>perldoc: perlrun</a> for documentation on these command switches.<table><thead><tr><th><strong>Option</strong><th><strong>Description</strong><tbody><tr><td><code>-0[octal]</code><td>specify record separator (<code>\0</code>, if no argument)<tr><td><code>-a</code><td>autosplit mode with <code>-n</code> or <code>-p</code> (splits <code>$_</code> into <code>@F</code>)<tr><td><code>-C[number/list]</code><td>enables the listed Unicode features<tr><td><code>-c</code><td>check syntax only (runs <code>BEGIN</code> and <code>CHECK</code> blocks)<tr><td><code>-d[:debugger]</code><td>run program under debugger<tr><td><code>-D[number/list]</code><td>set debugging flags (argument is a bit mask or alphabets)<tr><td><code>-e program</code><td>one line of program (several <code>-e</code>'s allowed, omit programfile)<tr><td><code>-E program</code><td>like <code>-e</code>, but enables all optional features<tr><td><code>-f</code><td>don't do <code>$sitelib/sitecustomize.pl</code> at startup<tr><td><code>-F/pattern/</code><td><code>split()</code> pattern for <code>-a</code> switch (<code>//</code>'s are optional)<tr><td><code>-i[extension]</code><td>edit <code><></code> files in place (makes backup if extension supplied)<tr><td><code>-Idirectory</code><td>specify <code>@INC/#include</code> directory (several <code>-I</code>'s allowed)<tr><td><code>-l[octal]</code><td>enable line ending processing, specifies line terminator<tr><td><code>-[mM][-]module</code><td>execute <code>use/no module...</code> before executing program<tr><td><code>-n</code><td>assume <code>while (<>) { ... }</code> loop around program<tr><td><code>-p</code><td>assume loop like <code>-n</code> but <code>print</code> line also, like <code>sed</code><tr><td><code>-s</code><td>enable rudimentary parsing for switches after programfile<tr><td><code>-S</code><td>look for programfile using <code>PATH</code> environment variable<tr><td><code>-t</code><td>enable tainting warnings<tr><td><code>-T</code><td>enable tainting checks<tr><td><code>-u</code><td>dump core after parsing program<tr><td><code>-U</code><td>allow unsafe operations<tr><td><code>-v</code><td>print version, patchlevel and license<tr><td><code>-V[:variable]</code><td>print configuration summary (or a single <code>Config.pm</code> variable)<tr><td><code>-w</code><td>enable many useful warnings<tr><td><code>-W</code><td>enable all warnings<tr><td><code>-x[directory]</code><td>ignore text before <code>#!perl</code> line (optionally <code>cd</code> to directory)<tr><td><code>-X</code><td>disable all warnings</table><p>This chapter will show examples with <code>-e</code>, <code>-l</code>, <code>-n</code>, <code>-p</code> and <code>-a</code> options. Some more options will be covered in later chapters, but not all of them are discussed in this book.<h2 id=executing-perl-code><a class=header href=#executing-perl-code>Executing Perl code</a></h2><p>If you want to execute a <code>perl</code> program file, one way is to pass the filename as argument to the <code>perl</code> command.<pre><code class=language-bash>$ echo 'print "Hello Perl\n"' > hello.pl
$ perl hello.pl
Hello Perl
</code></pre><p>For short programs, you can also directly pass the code as an argument to the <code>-e</code> or <code>-E</code> options. See <a href=https://perldoc.perl.org/feature>perldoc: feature</a> for details about the features enabled by the <code>-E</code> option.<pre><code class=language-bash>$ perl -e 'print "Hello Perl\n"'
Hello Perl

$ # multiple statements can be issued separated by ;
$ # -l option will be covered in detail later, appends \n to 'print' here
$ perl -le '$x=25; $y=12; print $x**$y'
59604644775390625
$ # or, use -E and 'say' instead of -l and 'print'
$ perl -E '$x=25; $y=12; say $x**$y'
59604644775390625
</code></pre><h2 id=filtering><a class=header href=#filtering>Filtering</a></h2><p><code>perl</code> one-liners can be used for filtering lines matched by a regexp, similar to <code>grep</code>, <code>sed</code> and <code>awk</code>. And similar to many command line utilities, <code>perl</code> can accept input from both <code>stdin</code> and file arguments.<pre><code class=language-bash>$ # sample stdin data
$ printf 'gate\napple\nwhat\nkite\n'
gate
apple
what
kite

$ # print all lines containing 'at'
$ # same as: grep 'at' and sed -n '/at/p' and awk '/at/'
$ printf 'gate\napple\nwhat\nkite\n' | perl -ne 'print if /at/'
gate
what

$ # print all lines NOT containing 'e'
$ # same as: grep -v 'e' and sed -n '/e/!p' and awk '!/e/'
$ printf 'gate\napple\nwhat\nkite\n' | perl -ne 'print if !/e/'
what
</code></pre><p>By default, <code>grep</code>, <code>sed</code> and <code>awk</code> will automatically loop over input content line by line (with <code>\n</code> as the line distinguishing character). The <code>-n</code> or <code>-p</code> option will enable this feature for <code>perl</code>. <a href=./using-modules.html#convert-one-liners-to-pretty-formatted-scripts>O module</a> section shows the code Perl runs with these options.<p>As seen before, the <code>-e</code> option accepts code as command line argument. Many shortcuts are available to reduce the amount of typing needed. In the above examples, a regular expression (defined by the pattern between a pair of forward slashes) has been used to filter the input. When the input string isn't specified, the test is performed against special variable <code>$_</code>, which has the contents of the current input line here (the correct term would be input <strong>record</strong>, see <a href=./record-separators.html#record-separators>Record separators</a> chapter). <code>$_</code> is also the default argument for many functions like <code>print</code> and <code>say</code>. To summarize:<ul><li><code>/REGEXP/FLAGS</code> is a shortcut for <code>$_ =~ m/REGEXP/FLAGS</code><li><code>!/REGEXP/FLAGS</code> is a shortcut for <code>$_ !~ m/REGEXP/FLAGS</code></ul><blockquote><p><img src=images/info.svg alt=info> See <a href=https://perldoc.perl.org/perlop#m/PATTERN/msixpodualngc>perldoc: match</a> for help on <code>m</code> operator. See <a href=https://perldoc.perl.org/perlvar#SPECIAL-VARIABLES>perldoc: special variables</a> for documentation on <code>$_</code>, <code>$&</code>, etc.</blockquote><p>Here's an example with file input instead of <code>stdin</code>.<pre><code class=language-bash>$ cat table.txt
brown bread mat hair 42
blue cake mug shirt -7
yellow banana window shoes 3.14

$ perl -nE 'say $& if /(?&LT!-)\d+$/' table.txt
42
14

$ # if the condition isn't required, capture groups can be used
$ perl -nE 'say /(\d+)$/' table.txt
42
7
14
</code></pre><blockquote><p><img src=images/info.svg alt=info> The <a href=https://github.com/learnbyexample/learn_perl_oneliners/tree/main/example_files>learn_perl_oneliners repo</a> has all the files used in examples (like <code>table.txt</code> in the above example).</blockquote><h2 id=substitution><a class=header href=#substitution>Substitution</a></h2><p>Use <code>s</code> operator for search and replace requirements. By default, this operates on <code>$_</code> when the input string isn't provided. For these examples, <code>-p</code> option is used instead of <code>-n</code> option, so that the value of <code>$_</code> is automatically printed after processing each input line. See <a href=https://perldoc.perl.org/perlop#s/PATTERN/REPLACEMENT/msixpodualngcer>perldoc: search and replace</a> for documentation and examples.<pre><code class=language-bash>$ # for each input line, change only first ':' to '-'
$ # same as: sed 's/:/-/' and awk '{sub(/:/, "-")} 1'
$ printf '1:2:3:4\na:b:c:d\n' | perl -pe 's/:/-/'
1-2:3:4
a-b:c:d

$ # for each input line, change all ':' to '-'
$ # same as: sed 's/:/-/g' and awk '{gsub(/:/, "-")} 1'
$ printf '1:2:3:4\na:b:c:d\n' | perl -pe 's/:/-/g'
1-2-3-4
a-b-c-d
</code></pre><blockquote><p><img src=images/info.svg alt=info> The <code>s</code> operator modifies the input string it is acting upon if the pattern matches. In addition, it will return number of substitutions made if successful, otherwise returns a <em>false</em> value (empty string or <code>0</code>). You can use <code>r</code> flag to return string after substitution instead of in-place modification. As mentioned before, this book assumes you are already familiar with <code>perl</code> regular expressions. If not, see <a href=https://perldoc.perl.org/perlretut>perldoc: perlretut</a> to get started.</blockquote><h2 id=field-processing><a class=header href=#field-processing>Field processing</a></h2><p>Consider the sample input file shown below with fields separated by a single space character.<pre><code class=language-bash>$ cat table.txt
brown bread mat hair 42
blue cake mug shirt -7
yellow banana window shoes 3.14
</code></pre><p>Here's some examples that is based on specific field rather than the entire line. The <code>-a</code> option will cause the input line to be split based on whitespaces and the field contents can be accessed using <code>@F</code> special array variable. Leading and trailing whitespaces will be suppressed, so there's no possibility of empty fields. More details is discussed in <a href=./field-separators.html#default-field-separation>Default field separation</a> section.<pre><code class=language-bash>$ # print the second field of each input line
$ # same as: awk '{print $2}' table.txt
$ perl -lane 'print $F[1]' table.txt
bread
cake
banana

$ # print lines only if the last field is a negative number
$ # same as: awk '$NF&LT0' table.txt
$ perl -lane 'print if $F[-1] < 0' table.txt
blue cake mug shirt -7

$ # change 'b' to 'B' only for the first field
$ # same as: awk '{gsub(/b/, "B", $1)} 1' table.txt
$ perl -lane '$F[0] =~ s/b/B/g; print "@F"' table.txt
Brown bread mat hair 42
Blue cake mug shirt -7
yellow banana window shoes 3.14
</code></pre><p>See <a href=./field-separators.html#output-field-separator>Output field separator</a> section for details on using array variable inside double quotes.<h2 id=begin-and-end><a class=header href=#begin-and-end>BEGIN and END</a></h2><p>You can use a <code>BEGIN{}</code> block when you need to execute something before input is read and a <code>END{}</code> block to execute something after all of the input has been processed.<pre><code class=language-bash>$ # same as: awk 'BEGIN{print "---"} 1; END{print "%%%"}'
$ seq 4 | perl -pE 'BEGIN{say "---"} END{say "%%%"}'
---
1
2
3
4
%%%
</code></pre><h2 id=env-hash><a class=header href=#env-hash>ENV hash</a></h2><p>When it comes to automation and scripting, you'd often need to construct commands that can accept input from user, file, output of a shell command, etc. As mentioned before, this book assumes <code>bash</code> as the shell being used. To access environment variables of the shell, you can use the special hash variable <code>%ENV</code> with the name of the environment variable as a string key.<blockquote><p><img src=images/info.svg alt=info> Quotes won't be used around <code>hash</code> keys in this book. See <a href=https://stackoverflow.com/q/401556/4082052>stackoverflow: are quotes around hash keys a good practice in Perl?</a> on possible issues if you don't quote the <code>hash</code> keys.</blockquote><pre><code class=language-bash>$ # existing environment variable
$ # output shown here is for my machine, would differ for you
$ perl -E 'say $ENV{HOME}'
/home/learnbyexample
$ perl -E 'say $ENV{SHELL}'
/bin/bash

$ # defined along with perl command
$ # note that the variable definition is placed before the shell command
$ word='hello' perl -E 'say $ENV{word}'
hello
$ # the characters are preserved as is
$ ip='hi\nbye' perl -E 'say $ENV{ip}'
hi\nbye
</code></pre><p>Here's another example when a regexp is passed as an environment variable content.<pre><code class=language-bash>$ cat word_anchors.txt
sub par
spar
apparent effort
two spare computers
cart part tart mart

$ # assume 'r' is a shell variable that has to be passed to the perl command
$ r='\Bpar\B'
$ rgx="$r" perl -ne 'print if /$ENV{rgx}/' word_anchors.txt
apparent effort
two spare computers
</code></pre><p>You can also make use of the <code>-s</code> option to assign a <code>perl</code> variable.<pre><code class=language-bash>$ r='\Bpar\B'
$ perl -sne 'print if /$rgx/' -- -rgx="$r" word_anchors.txt
apparent effort
two spare computers
</code></pre><blockquote><p><img src=images/info.svg alt=info> As an example, see my repo <a href=https://github.com/learnbyexample/command_help/blob/master/ch>ch: command help</a> for a practical shell script, where commands are constructed dynamically.</blockquote><h2 id=executing-external-commands><a class=header href=#executing-external-commands>Executing external commands</a></h2><p>You can execute external commands using the <code>system</code> function. See <a href=https://perldoc.perl.org/functions/system>perldoc: system</a> for documentation and details like how string/list argument is processed before it is executed.<pre><code class=language-bash>$ perl -e 'system("echo Hello World")'
Hello World

$ perl -e 'system("wc -w &LTword_anchors.txt")'
12

$ perl -e 'system("seq -s, 10 > out.txt")'
$ cat out.txt
1,2,3,4,5,6,7,8,9,10
</code></pre><p>Return value of <code>system</code> or special variable <code>$?</code> can be used to act upon exit status of command issued. As per documentation:<blockquote><p><img src=images/info.svg alt=info> The return value is the exit status of the program as returned by the <code>wait</code> call. To get the actual exit value, shift right by eight</blockquote><pre><code class=language-bash>$ perl -E '$es=system("ls word_anchors.txt"); say $es'
word_anchors.txt
0
$ perl -E 'system("ls word_anchors.txt"); say $?'
word_anchors.txt
0

$ perl -E 'system("ls xyz.txt"); say $?'
ls: cannot access 'xyz.txt': No such file or directory
512
</code></pre><p>To save the result of an external command, use backticks or <code>qx</code> operator. See <a href=https://perldoc.perl.org/perlop#qx/STRING/>perldoc: qx</a> for documentation and details like separating out <code>STDOUT</code> and <code>STDERR</code>.<pre><code class=language-bash>$ perl -e '$words = `wc -w &LTword_anchors.txt`; print $words'
12

$ perl -e '$nums = qx/seq 3/; print $nums'
1
2
3
</code></pre><blockquote><p><img src=images/info.svg alt=info> See also <a href=https://stackoverflow.com/q/799968/4082052>stackoverflow: difference between backticks, system, and exec</a></blockquote><h2 id=summary><a class=header href=#summary>Summary</a></h2><p>This chapter introduced some of the common options for <code>perl</code> cli usage, along with typical cli text processing examples. While specific purpose cli tools like <code>grep</code>, <code>sed</code> and <code>awk</code> are usually faster, <code>perl</code> has a much more extensive standard library and ecosystem. And you do not have to learn a lot if you are already comfortable with <code>perl</code> but not familiar with those cli tools. The next section has a few exercises for you to practice the cli options and text processing use cases.<h2 id=exercises><a class=header href=#exercises>Exercises</a></h2><blockquote><p><img src=images/info.svg alt=info> Exercise related files are available from <a href=https://github.com/learnbyexample/learn_perl_oneliners/tree/main/exercises>exercises folder of learn_perl_oneliners repo</a>.</blockquote><blockquote><p><img src=images/info.svg alt=info> All the exercises are also collated together in one place at <a href=https://github.com/learnbyexample/learn_perl_oneliners/blob/main/exercises/Exercises.md>Exercises.md</a>. To see the solutions, visit <a href=https://github.com/learnbyexample/learn_perl_oneliners/blob/main/exercises/Exercise_solutions.md>Exercise_solutions.md</a>.</blockquote><p><strong>a)</strong> For the input file <code>ip.txt</code>, display all lines containing <code>is</code>.<pre><code class=language-bash>$ cat ip.txt
Hello World
How are you
This game is good
Today is sunny
12345
You are funny

##### add your solution here
This game is good
Today is sunny
</code></pre><p><strong>b)</strong> For the input file <code>ip.txt</code>, display first field of lines <em>not</em> containing <code>y</code>. Consider space as the field separator for this file.<pre><code class=language-bash>##### add your solution here
Hello
This
12345
</code></pre><p><strong>c)</strong> For the input file <code>ip.txt</code>, display all lines containing no more than 2 fields.<pre><code class=language-bash>##### add your solution here
Hello World
12345
</code></pre><p><strong>d)</strong> For the input file <code>ip.txt</code>, display all lines containing <code>is</code> in the second field.<pre><code class=language-bash>##### add your solution here
Today is sunny
</code></pre><p><strong>e)</strong> For each line of the input file <code>ip.txt</code>, replace first occurrence of <code>o</code> with <code>0</code>.<pre><code class=language-bash>##### add your solution here
Hell0 World
H0w are you
This game is g0od
T0day is sunny
12345
Y0u are funny
</code></pre><p><strong>f)</strong> For the input file <code>table.txt</code>, calculate and display the product of numbers in the last field of each line. Consider space as the field separator for this file.<pre><code class=language-bash>$ cat table.txt
brown bread mat hair 42
blue cake mug shirt -7
yellow banana window shoes 3.14

##### add your solution here
-923.16
</code></pre><p><strong>g)</strong> Append <code>.</code> to all the input lines for the given <code>stdin</code> data.<pre><code class=language-bash>$ printf 'last\nappend\nstop\n' | ##### add your solution here
last.
append.
stop.
</code></pre><p><strong>h)</strong> Use contents of <code>s</code> variable to display all matching lines from the input file <code>ip.txt</code>. Assume that <code>s</code> doesn't have any regexp metacharacters. Construct the solution such that there's at least one word character immediately preceding the contents of <code>s</code> variable.<pre><code class=language-bash>$ s='is'

##### add your solution here
This game is good
</code></pre><p><strong>i)</strong> Use <code>system</code> to display contents of filename present in second field (space separated) of the given input line.<pre><code class=language-bash>$ s='report.log ip.txt sorted.txt'
$ echo "$s" | ##### add your solution here
Hello World
How are you
This game is good
Today is sunny
12345
You are funny

$ s='power.txt table.txt'
$ echo "$s" | ##### add your solution here
brown bread mat hair 42
blue cake mug shirt -7
yellow banana window shoes 3.14
</code></pre></main><nav class=nav-wrapper aria-label="Page navigation"><a rel=prev href=preface.html class="mobile-nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=line-processing.html class="mobile-nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav class=nav-wide-wrapper aria-label="Page navigation"><a rel=prev href=preface.html class="nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=line-processing.html class="nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a></nav></div><script>
            window.playground_copyable = true;
        </script><script src=elasticlunr.min.js charset=utf-8></script><script src=mark.min.js charset=utf-8></script><script src=searcher.js charset=utf-8></script><script src=clipboard.min.js charset=utf-8></script><script src=highlight.js charset=utf-8></script><script src=book.js charset=utf-8></script><script src=sidebar.js></script>